$(document).on 'page:reloaded', ->
  $('.pdf-pages').each ->
    Galleria.run '.pdf-pages',
      responsive:true
      height:0.8
      transition: 'flash'
      swipe: true

  $likeSlideBtn = $('#like_slide_btn')
  $likeSlideBtn
    .on 'ajax:error', (xhr, data) ->
      noty({text: data.responseJSON.message})
    .on 'ajax:success', (xhr, data) ->
      $('#likes_count').text(data.likes_count)
      $likeSlideBtn.attr('disabled', 'disabled')

  $collectSlideBtn = $('#collect_slide_btn')
  $collectSlideBtn
    .on 'ajax:error', (xhr, data) ->
      noty({text: data.responseJSON.message})
    .on 'ajax:success', (xhr, data) ->
      $('#collections_count').text(data.collections_count)
      $collectSlideBtn.attr('disabled', 'disabled')

  $('.delete-slide-link').tooltip({placement: 'top'})
